# KTWIN - Kubernetes-based Platform for Digital Twins

## Event Types

| Event Type  | Source | Target | |
| ----------- | ----------- | ----------- | ----------- |
| `ktwin.real.<instance_id>.generated`    | Real Twin     | Virtual Twin  | Event generated from Real Twin and sent to Virtual Twin.  |
| `ktwin.virtual.<instance_id>.generated`    | Virtual Twin  | Real Twin     | Event generated from Virtual Twin and sent to Real Twin.  |
| `ktwin.real.store.generated`    | Real Twin     | Event Store   | Event generated from Real Twin and registered in the Event Store. |
| `ktwin.virtual.store.generated`    | Virtual Twin  | Event Store   | Event generated from Virtual Twin and registered in the Event Store. |
| `ktwin.command.<instance_id>.<command_id>.generated`    | Virtual Twin  | Virtual Twin  | Event generated by a Virtual Twin and sent to a Virtual Twin in which it has some relationship. The event is generated based on the DTDL commands defined in the Twin Interface. |

## Message Format

The platform uses Cloud Event specification for describing event data within the platform boundaries. The physical twins messages are expected to follow Cloud Event specification as well. In case the below format is not sent, the platform will assume the content sent is the data field in JSON format, and it will populate the rest of the mandatory fields.

```json
{
    "id": "41c9afea-02a1-48a0-ad3c-cb9faae86551",
    "type" : "ktwin.real.virtual.generated",
    "source": "ktwin.real.<instanceId>",
    "time" : "2018-04-05T17:31:00Z",
    "datacontenttype": "application/json",
    "data": {
        "temperature": 20
    }
}
```
